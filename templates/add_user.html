{% extends 'base.html' %}

{% block content %}
{% include 'messages.html' %}
  <br/>

{% if name %}
<h1>CADASTRADO!</h1>
<br/>

{% else %}
  <h1>Lista de Usuários:</h1>
  <br/>
  <div class="shadow p-3 mb-5 bg-body rounded">
    <form method="POST">
        {{ form.hidden_tag() }}

        {{ form.usuario.label(
          class="form-label"
        ) }}

        {{ form.usuario(
          class="form-control"
        ) }}
        <br/>

        {{ form.email.label(
          class="form-label"
        ) }}

        {{ form.email(
          class="form-control"
        ) }}
        <br/>

        {{ form.password_hash.label(
          class="form-label"
        ) }}

        {{ form.password_hash(
          class="form-control"
        ) }}
        <br/>

        {{ form.password_hash2.label(
          class="form-label"
        ) }}

        {{ form.password_hash2(
          class="form-control"
        ) }}
        <br/>

        {{ form.submit(
          class="btn btn-secondary"
        ) }}
      </form>
  </div>
{% endif %}
<table class="table table-hover 
              table-bordered
              table-striped">
<thead class="table-dark">
  <tr>
    <th scope="col">#</th>
    <th scope="col">Usupario</th>
    <th scope="col">Email</th>
    <th scope="col">Senha</th>
    <th scope="col">Ações</th>
  </tr>
</thead>
{% for our_user in our_users %}
  <tr>
    <th scope="row"> {{ our_user.id }}.</th>
      <td><a href="{{url_for('update', id=our_user.id)}}"> 
          {{ our_user.usuario }} </a></td>
      <td>{{ our_user.email }}</td>
      <td>{{ our_user.password_hash }}</td>
      <!-- Actions DB -->
      <td>
        <a href="{{url_for('update', id=our_user.id)}}">
        Editar</a>
        <a href="{{url_for('delete', id=our_user.id)}}">
          Deletar</a>
      </td>
  </tr>
  {% endfor %}
</table>
<br/>
{% endblock %}